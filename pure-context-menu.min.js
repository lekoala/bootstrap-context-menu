var d={contextMenuClass:"pure-context-menu",dropdownClass:"dropdown-menu",dividerClass:"dropdown-divider",menuItemClass:"pure-context-menu-item",itemClass:"dropdown-item pure-context-menu-item",disabledClass:["disabled","user-select-none"],zIndex:"9999",preventCloseOnClick:!1,useLists:!1,listClass:"list-group",listItemClass:"list-group-item list-group-item-action",fastClick:!1,closeIfOpen:!1,show:(m,t)=>!0,minWidth:"120px",maxWidth:"240px",popover:!1};function x(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}var u=new Set,f=class{i;s;e;t;l;constructor(t,e,i){this.e=e,this.i=t,this.s=null,this.t=Object.assign({},d,i),["contextmenu","long-press","keydown"].forEach(s=>{t.addEventListener(s,this)}),this.n().forEach(s=>{document.addEventListener(s,this)}),u.add(this)}n(){return this.t.fastClick?["click","touchstart"]:["click"]}handleEvent=t=>{let i={"long-press":"contextmenu",touchstart:"click"}[t.type]||t.type;this[`on${i}`](t)};static updateDefaultOptions(t){d=Object.assign(d,t)}static getDefaultOptions(){return d}getItems(){return this.e}setItems(t){this.e=t}o=()=>{let t=this.t.useLists,e=document.createElement("ul");e.style.minWidth=this.t.minWidth,e.style.maxWidth=this.t.maxWidth,e.style.display="block",e.classList.add(this.t.contextMenuClass),e.classList.add(...this.t.dropdownClass.split(" ")),t&&e.classList.add(this.t.listClass),x()&&this.t.popover&&e.setAttribute("popover","manual");for(let i of this.e){let s=document.createElement("li");if(s.classList.add(this.t.menuItemClass),t&&(s.classList.add(...this.t.listItemClass.split(" ")),i.disabled&&s.classList.add(...this.t.disabledClass)),i.classes&&s.classList.add(...i.classes),i==="-"){let l=document.createElement("hr");l.classList.add(this.t.dividerClass),s.appendChild(l)}else{let l=document.createElement("a");i.html?l.innerHTML=i.label:l.innerText=i.label,l.style.cursor="pointer",l.style.whiteSpace="normal",t||(l.classList.add(...this.t.itemClass.split(" ")),i.disabled&&l.classList.add(...this.t.disabledClass)),s.appendChild(l)}e.appendChild(s)}return e};c=(t,e,i)=>{let s=this.i,l=window.getComputedStyle(i),n=parseInt(l.borderWidth)+1,o=s.getBoundingClientRect(),a=t,c=e;["BODY","HTML"].includes(s.tagName)||(a-=o.left,c-=o.top);let r=parseInt(l.width),C=a+r>s.clientWidth,y=c+i.clientHeight>s.clientHeight,h=t,p=e;return C&&(h=s.clientWidth-r-n,["BODY","HTML"].includes(s.tagName)||(h+=o.left)),y&&(p=s.clientHeight-i.clientHeight-n,["BODY","HTML"].includes(s.tagName)||(p+=o.top)),{normalizedX:h,normalizedY:p}};close=()=>this.s?(this.s.remove(),this.s=null,!0):!1;onkeydown(t){switch(t.keyCode||t.key){case 27:case"Escape":this.close();break}}oncontextmenu=t=>{if(!this.t.show(t,this))return;t.preventDefault(),t.stopPropagation();let e=!1;if(u.forEach(c=>{c.close()&&c===this&&(e=!0)}),this.t.closeIfOpen&&e||t.target.closest(`.${this.t.contextMenuClass}`))return;this.l=t,this.close();let s=this.o();document.querySelector("body").append(s),s.hasAttribute("popover")&&s.showPopover(),s.style.position="fixed",s.style.zIndex=this.t.zIndex;let l=t.detail.clientX??t.clientX,n=t.detail.clientY??t.clientY,{normalizedX:o,normalizedY:a}=this.c(l,n,s);s.style.top=`${a}px`,s.style.left=`${o}px`,this.s=s};a=t=>!!(t.target.closest(`.${this.t.contextMenuClass}`)==this.s&&this.s);d=t=>{let i=t.target.closest("li");if(i){let s=[...i.parentElement.childNodes].findIndex(n=>n===i),l=this.e[s];l.callback&&!l.disabled&&(l.callback(this.l,this),(l.preventCloseOnClick??this.t.preventCloseOnClick??!1)||this.close())}};onclick=t=>{if(this.a(t)){this.d(t);return}this.close()};off=()=>{u.delete(this),this.close(),this.n().forEach(t=>{document.removeEventListener(t,this)}),["contextmenu","long-press","keydown"].forEach(t=>{this.i.removeEventListener(t,this)})}},g=f;export{g as default};
/**
 * Pure context menu
 * https://github.com/lekoala/pure-context-menu
 * @license MIT
 */
//# sourceMappingURL=pure-context-menu.min.js.map
